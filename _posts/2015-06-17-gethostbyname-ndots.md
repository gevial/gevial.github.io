---
title: Разрешение коротких имён с помощью gethostbyname()
tags: [dns]
---
Сегодня обнаружил особенность работы функции gethostbyname() стандартной библиотеки C в Linux.

При указании в качестве аргумента короткого имени, к нему автоматически добавляется домен машины. В моём окружении данное поведение нежелательно, так как короткое имя и FQDN резолвятся в разные адреса (приватный и публичный соответственно). Ситуация легко обходится следующим образом: достаточно добавить в конце имени точку. Тогда домен добавляться не будет. Пример на Python'е:

```python
>> import socket
>> socket.gethostbyname('hserv1')
123.45.67.89
>>socket.gethostbyname('hserv1.')
192.168.0.27
```

Такое поведение настраивается. В `/etc/resolv.conf` можно указать опцию `ndots`. Если в имени меньше точек, чем `ndots`, то происходит добавление домена.
